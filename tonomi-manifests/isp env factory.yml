application: 
    interfaces:
        component:
            "*": bind(factory#component.*)
        isp-environments:
            env-by-id: bind(factory#factory.instances)
        
        
        configuration:
            "*": bind(factory#configuration.*)
      
    configuration:
        component.application: "In-stream environment on marathon"
        component.discoveryScript: /isp-environment/discover.py
        component.discoverySchedule: "0/30 * * * * ? *"
        
        
    components: 
        factory:
            type: scripted.ComponentFactory 
            interfaces:
                configuration:
                    marathonURL: configuration(string)
                isp-environments:
                    env-by-id: consume-signal(map<string,string>)
                redis:
                    redis-by-id: consume-signal(map<string,string>)
                zookeeper:
                    zookeeper-by-id: consume-signal(map<string,string>)
            
        scripting:
            type: reference.Service
            interfaces:
                scripting:
                    execute: receive-command(string script, object arguments => object results)  
        redis:
            type: reference.Service
            interfaces:
                apps: 
                    redis-by-id: publish-signal(map<string,string>)
        zookeeper:
            type: reference.Service
            interfaces:
                apps: 
                    zookeeper-by-id: publish-signal(map<string,string>)

    bindings:
        - [factory, redis]
        - [factory, zookeeper]
        - [factory, scripting]